<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Debug Case Data</title>
  </head>
  <body>
    <h1>Debug Case Data Structure</h1>
    <button type="button" id="checkCaseBtn">Check Shoulder Impingement Case</button>
    <div id="output"></div>

    <script type="module">
      import { store } from './app/js/core/store.js';

      function checkCaseData() {
        const cases = store.getAllCases();
        const shoulderCase = cases.find((c) => c.id === 'shoulder-impingement');

        if (!shoulderCase) {
          const out = document.getElementById('output');
          const pre = document.createElement('pre');
          pre.textContent = '‚ùå Case not found!';
          out.replaceChildren(pre);
          return;
        }

        const output = document.getElementById('output');
        // Build content with safe text nodes
        const frag = document.createDocumentFragment();

        const h2a = document.createElement('h2');
        h2a.textContent = 'Case Data Structure:';
        const prea = document.createElement('pre');
        prea.textContent = JSON.stringify(shoulderCase, null, 2);

        const h2b = document.createElement('h2');
        h2b.textContent = 'encounters.eval structure:';
        const preb = document.createElement('pre');
        preb.textContent = JSON.stringify(shoulderCase.encounters?.eval, null, 2);

        const h2c = document.createElement('h2');
        h2c.textContent = 'Subjective data:';
        const prec = document.createElement('pre');
        prec.textContent = JSON.stringify(shoulderCase.encounters?.eval?.subjective, null, 2);

        const h2d = document.createElement('h2');
        h2d.textContent = 'Objective data:';
        const pred = document.createElement('pre');
        pred.textContent = JSON.stringify(shoulderCase.encounters?.eval?.objective, null, 2);

        frag.append(h2a, prea, h2b, preb, h2c, prec, h2d, pred);
        output.replaceChildren(frag);
      }

      // Wire up click without inline handler
      document.getElementById('checkCaseBtn')?.addEventListener('click', checkCaseData);
    </script>
  </body>
</html>
