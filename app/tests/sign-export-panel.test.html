<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign & Export Panel Test</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <style>
      body {
        padding: 16px;
        font:
          14px/1.4 system-ui,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
      }
      .result {
        margin-top: 12px;
        padding: 8px 10px;
        border-radius: 8px;
      }
      .pass {
        background: #e6ffed;
        color: #046b1c;
        border: 1px solid #a6f4c5;
      }
      .fail {
        background: #ffeff0;
        color: #8a041a;
        border: 1px solid #ffd0d4;
      }
      .test-wrap {
        max-width: 420px;
      }
    </style>
  </head>
  <body>
    <h1>Sign & Export Panel Test</h1>
    <p>Renders the panel in isolation and verifies button presence and basic click wiring.</p>
    <div class="test-wrap">
      <div id="mount"></div>
    </div>
    <div id="results" class="result">Runningâ€¦</div>

    <script type="module">
      import { render } from '../js/features/navigation/sign-export-panel.js';
      const mount = document.getElementById('mount');
      render(mount, { caseData: { title: 'Demo Case', meta: {} } });
      const btn = mount.querySelector('button');
      const res = document.getElementById('results');
      const errors = [];
      function assert(cond, msg) {
        if (!cond) errors.push(msg);
      }
      assert(!!btn, 'Button missing');
      assert(btn.textContent.includes('Sign'), 'Button label');
      // Do not actually open signature modal in test; ensure handler is attached
      btn.click();
      // If the click doesn't throw synchronously, we consider it wired. Async flows are allowed to fail in test env.
      res.textContent = errors.length ? 'FAIL: ' + errors.join('; ') : 'PASS';
      res.className = 'result ' + (errors.length ? 'fail' : 'pass');
      console.log('SignExport Panel Test:', errors.length ? 'FAIL' : 'PASS', errors);
    </script>
  </body>
</html>
